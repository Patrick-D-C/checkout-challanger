import{d as p,u as y,c as l,a as t,b as u,t as r,e as n,F as x,r as b,f as a,h as _,i as h,m as v,v as k,n as C,_ as g,g as m}from"./index-Ca_W9Rs2.js";const $={style:{display:"flex","align-items":"center","justify-content":"space-between","margin-bottom":"8px"}},f={style:{margin:"0","font-size":"18px"}},R={key:0,style:{opacity:".7"}},w={key:1,style:{width:"100%","border-collapse":"collapse"}},F=["value","onInput"],S=["onClick"],V=p({__name:"CartList",setup(c){const e=y();return(i,d)=>(a(),l("section",null,[t("header",$,[t("h2",f,"Carrinho ("+r(n(e).count)+")",1),n(e).items.length?(a(),l("button",{key:0,onClick:d[0]||(d[0]=o=>n(e).clear()),style:{background:"none",border:"none",color:"#b00",cursor:"pointer"}},"limpar")):u("",!0)]),n(e).items.length?(a(),l("table",w,[d[1]||(d[1]=t("thead",null,[t("tr",{style:{"text-align":"left","border-bottom":"1px solid #eee"}},[t("th",null,"Produto"),t("th",{style:{width:"90px"}},"Qtd"),t("th",{style:{width:"120px"}},"Unit."),t("th",{style:{width:"120px"}},"Subtotal"),t("th",{style:{width:"60px"}})])],-1)),t("tbody",null,[(a(!0),l(x,null,b(n(e).items,o=>(a(),l("tr",{key:o.id,style:{"border-bottom":"1px solid #f3f3f3"}},[t("td",null,r(o.name),1),t("td",null,[t("input",{type:"number",min:"1",value:o.quantidade,onInput:s=>n(e).setQty(o.id,Number(s.target.value)),style:{width:"70px"}},null,40,F)]),t("td",null,"R$ "+r(o.price.toFixed(2)),1),t("td",null,"R$ "+r((o.price*o.quantidade).toFixed(2)),1),t("td",null,[t("button",{onClick:s=>n(e).remove(o.id),style:{border:"none",background:"none",color:"#b00",cursor:"pointer"}},"remover",8,S)])]))),128))])])):(a(),l("div",R,"Seu carrinho está vazio."))]))}}),I={style:{display:"grid",gap:"8px","align-items":"center","grid-template-columns":"160px 1fr","max-width":"460px"}},T={key:0},P={key:1},A={style:{"font-size":"12px",opacity:".8"}},D=["disabled"],O={key:0,style:{color:"#b00","margin-top":"8px"}},z=p({__name:"PaymentForm",setup(c){const e=y(),i=_(()=>e.metodo_pagamento==="CARTAO_CREDITO");return h(()=>[e.metodo_pagamento,e.parcelas,e.items],()=>{},{deep:!0}),(d,o)=>(a(),l("section",null,[o[6]||(o[6]=t("h2",{style:{margin:"0 0 8px 0","font-size":"18px"}},"Pagamento",-1)),t("div",I,[o[4]||(o[4]=t("label",null,"Forma",-1)),v(t("select",{"onUpdate:modelValue":o[0]||(o[0]=s=>n(e).metodo_pagamento=s),style:{padding:"8px","border-radius":"8px",border:"1px solid #ddd"}},[...o[3]||(o[3]=[t("option",{value:"PIX"},"Pix (10% desc.)",-1),t("option",{value:"CARTAO_CREDITO"},"Cartão de Crédito",-1)])],512),[[k,n(e).metodo_pagamento]]),i.value?(a(),l("label",T,"Parcelas")):u("",!0),i.value?(a(),l("div",P,[v(t("input",{type:"range",min:"1",max:"12","onUpdate:modelValue":o[1]||(o[1]=s=>n(e).parcelas=s)},null,512),[[C,n(e).parcelas,void 0,{number:!0}]]),t("div",A,r(n(e).parcelas)+"x",1)])):u("",!0),o[5]||(o[5]=t("div",null,null,-1)),t("button",{disabled:!n(e).items.length||n(e).loading,onClick:o[2]||(o[2]=s=>n(e).checkout()),style:{padding:"10px 12px","border-radius":"8px",border:"1px solid #333",background:"#111",color:"#fff",cursor:"pointer"}},r(n(e).loading?"Calculando…":"Calcular total"),9,D)]),n(e).error?(a(),l("p",O,r(n(e).error),1)):u("",!0)]))}}),E={class:"summary-card"},N={class:"row"},q={class:"row"},B={key:0,class:"row highlight"},M={key:1,class:"row"},U={key:2,class:"row"},j={class:"row total"},L={key:1,class:"hint"},Q=p({__name:"CheckoutSummary",setup(c){const e=y(),i=_(()=>{var s;const o=((s=e.lastResponse)==null?void 0:s.desconto)??null;return o&&o>0?o:null}),d=_(()=>{var o;return((o=e.lastResponse)==null?void 0:o.metodo_pagamento)==="CARTAO_CREDITO"});return(o,s)=>(a(),l("section",null,[s[7]||(s[7]=t("h2",{class:"title"},"Resumo",-1)),t("div",E,[t("div",N,[s[0]||(s[0]=t("span",null,"Subtotal",-1)),t("strong",null,"R$ "+r(n(e).calcSubtotal.toFixed(2)),1)]),n(e).lastResponse?(a(),l(x,{key:0},[s[6]||(s[6]=t("div",{class:"divider"},null,-1)),t("div",q,[s[1]||(s[1]=t("span",null,"Método",-1)),t("strong",null,r(n(e).lastResponse.metodo_pagamento),1)]),i.value?(a(),l("div",B,[s[2]||(s[2]=t("span",null,"Desconto",-1)),t("strong",null,"- R$ "+r(i.value.toFixed(2)),1)])):u("",!0),d.value?(a(),l("div",M,[s[3]||(s[3]=t("span",null,"Parcelas",-1)),t("strong",null,r(n(e).lastResponse.parcelas),1)])):u("",!0),d.value&&n(e).lastResponse.valor_parcela?(a(),l("div",U,[s[4]||(s[4]=t("span",null,"Valor da parcela",-1)),t("strong",null,"R$ "+r(n(e).lastResponse.valor_parcela.toFixed(2)),1)])):u("",!0),t("div",j,[s[5]||(s[5]=t("span",null,"Total",-1)),t("strong",null,"R$ "+r(n(e).lastResponse.valor_total.toFixed(2)),1)])],64)):(a(),l("p",L,"Clique em “Calcular total” para aplicar descontos/juros."))])]))}}),X=g(Q,[["__scopeId","data-v-8fd02c12"]]),G={class:"checkout"},H={class:"checkout-left"},J={class:"checkout-right"},K=p({__name:"CheckoutView",setup(c){return(e,i)=>(a(),l("section",G,[t("div",H,[m(V)]),t("aside",J,[m(z),m(X)])]))}}),Y=g(K,[["__scopeId","data-v-119de064"]]);export{Y as default};
